define ("mod_feedbackbox/chartview",["jquery","core/ajax","mod_feedbackbox/chart"],function(a,b,c){var e=[];function d(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.onload=function(){var a=new DOMParser,c=a.parseFromString(b.responseText,"text/xml"),d=c.getElementsByTagName("svg")[0];d.setAttribute("width","48px");d.setAttribute("height","48px");var f=btoa(new XMLSerializer().serializeToString(d)),g=new Image;g.src="data:image/svg+xml;base64,"+f;g.onload=function(){var a=document.createElement("canvas");a.width=this.width;a.height=this.height;var b=a.getContext("2d");b.drawImage(this,0,0);var c=new Image;c.src=a.toDataURL("image/png");e.push(c)}};b.send()}return{init:function init(f,g,h){a("#feedbackboxicons").children().each(function(){d(a(this).attr("src"))});if("single"===g){var i=b.call([{methodname:"mod_feedbackbox_chartdata_single",args:{feedbackboxid:f,turnus:h}}]);i[0].done(function(b){var d=a("#studchart");new c(d,{type:"bar",plugins:[{afterDraw:function afterDraw(a){var b=a.chart.ctx,c=a.scales["x-axis-0"],d=a.scales["y-axis-0"];d.ticks.forEach(function(a,f){if(f in e){var g=c.getPixelForTick(f);b.drawImage(e[f],g-15,d.bottom,30,30)}})}}],data:{labels:["","","",""],datasets:[{data:b.data,maxBarThickness:50}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},tooltips:{enabled:!0},elements:{rectangle:{backgroundColor:"rgba(255, 172, 37, 0.2)",borderColor:"rgba(255, 172, 37, 1)",borderWidth:2}},scales:{yAxes:[{display:!1,gridLines:{display:!1},ticks:{suggestedMin:0}}],xAxes:[{gridLines:{display:!1}}]}}})})}else{var j=b.call([{methodname:"mod_feedbackbox_chartdata_multiple",args:{feedbackboxid:f}}]);j[0].done(function(b){var d=[],f=[],g=[],i=1;b.data.forEach(function(a){f.push(a.participants);g.push(a.rating);d.push("Runde "+i++)});var j=a("#participants"),k=new c(j,{type:"bar",data:{labels:d,datasets:[{data:f,maxBarThickness:50}]},options:{legend:{display:!1},tooltips:{enabled:!0},scales:{yAxes:[{display:!0,ticks:{suggestedMin:0,suggestedMax:h,callback:function callback(a){if(0==a%1){return a}}},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1}}]},elements:{rectangle:{backgroundColor:"rgba(164, 164, 164, 0.2)",borderColor:"rgba(164, 164, 164, 1)",borderWidth:2}},maintainAspectRatio:!1}}),l=a("#coursehealth"),m=new c(l,{type:"bar",plugins:[{afterDraw:function afterDraw(a){var b=a.chart.ctx,c=a.scales["y-axis-0"];c.ticks.forEach(function(a,d){if(1<=a&&4>=a&&0==a%1){var f=c.getPixelForTick(d);b.drawImage(e[e.length-a],0,f,30,30)}})}}],data:{labels:d,datasets:[{data:g,maxBarThickness:50}]},options:{layout:{padding:{left:30}},legend:{display:!1},tooltips:{enabled:!0},scales:{yAxes:[{display:!1,ticks:{beginAtZero:!1,suggestedMin:1,suggestedMax:4,callback:function callback(a){if(0==a%1){return a}}},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1}}]},elements:{rectangle:{backgroundColor:"rgba(255, 172, 37, 0.2)",borderColor:"rgba(255, 172, 37, 1)",borderWidth:2}},maintainAspectRatio:!1}})})}}}});
//# sourceMappingURL=chartview.min.js.map
